# AutoPlanX
AutoPlanX: Lateral-Longitudinal Interaction Demo for uneven terrain
AutoPlanX: Lateral-Longitudinal Interaction Demo
# 基于双向可达性搜索的非平坦地形动态路径规划算法
## 时空走廊约束下的区间代数与运动学验证

**作者姓名**  
*日期：2025年3月10日*

---
算法整体流程框架：
前面先跑一个LIO-SAM（其实没有也可以？）

通过平面拟合等方法拟合出不平坦地面？

算法主要提出的场景：计算资源少，实时计算，结构化地形。可以用于火星车，野外探险等道路崎岖的路面进行导航。能够用于处理移动障碍物的场景。

代码结构？应该还是基于状态机FSM。魔改高飞？

定位建图模块：LIO-SAM

主要需要点云：

对于planning所需要的障碍物建模主要分为两类:

静态障碍物：直接通过点云处理方法：

我们更倾向于使用计算更快的方式，在不同的高度上进行点云采样。高度占有较多的地方设定为障碍物。

动态障碍物：还没有想好？想着采用一些自动驾驶通用的方法。

barrier corridor：高度差过大的区域。
对于 barrier corridor来说，我们试图想着尽量晚并且少的侵入 barrier corridor。

还是横纵向解耦的思路，给定车辆的速度，planning horizon在50m左右。

此算法优势主要体现在算的快，并且融合高程约束，并且按照区间来进行DP搜索，突破了离散DP的限制。同时使用单步规划，采用类似JPS的跳跃式算法，进一步加强了计算速度。

如何对不平坦地形对于车辆行驶的影响进行建模？


## 摘要
针对非平坦地形中动态障碍物共存场景下的路径规划难题，本文提出一种基于双向可达性搜索的动态规划算法（Bidirectional Reachability Search, BRS）。算法核心创新点包括：  
1. **时空走廊约束的区间传播机制**：通过前向动态区间代数融合地形高程约束与动态障碍物  
2. **双向运动学验证框架**：结合前向可达集与后向运动学约束生成安全走廊  
3. **可见性优化的多步跳跃策略**：突破传统单步决策限制  

实验表明，在倾斜角≤25°的非结构化地形中，算法规划成功率（98.2%）显著优于RRT*（79.5%）与MPC（89.1%），平均计算时间（35ms）满足实时性需求。

---

## 引言
非平坦地形路径规划面临三重挑战：
- **地形约束复杂性**：斜坡、沟壑等地形特征需转化为连续的横向（d轴）运动约束  
- **动态障碍物规避**：移动障碍物在时空维度形成时变禁行区域  
- **实时性要求**：传统方法在高维约束下计算效率骤降  

| 方法类型          | 地形适应性缺陷                | 动态障碍处理缺陷               |
|-------------------|-------------------------------|--------------------------------|
| 采样法（RRT*）    | 未显式建模地形连续性约束      | 重规划频率高（>100ms）        |
| 优化法（MPC）     | 局部最优导致陷坡风险          | 预测时域短（<3s）             |
| 栅格法（Lattice） | 固定分辨率忽略地形曲率        | 障碍物膨胀保守性过高          |

---

## 核心算法设计
### 时空走廊约束建模
**地形高程映射**：  
\[ C_{\text{terrain}}(t) = [d_{\min}(z(t)), d_{\max}(z(t))] \]  

**动态障碍物区间**：  
\[ O_i(t) = \left[ d_{\text{obs},i}(t) - \frac{w_{\text{obs}}}{2}, d_{\text{obs},i}(t) + \frac{w_{\text{obs}}}{2} \right] \]

---

### 双向可达性分析
**前向区间传播伪代码**：
```python
def generateForwardStagesPro():
    1. 基于v_dmax计算可达区间
    2. 执行区间差集运算
    3. 标注区间类型





An Efficient Global Trajectory Planner for Highly  Dynamical Nonholonomic Autonomous  Vehicles on 3-D Terrains

高动态非完整越野自动驾驶汽车在 3-D 地形上实现高机动性。
在拓扑结构不平坦的复杂地形上，设计安全可行的车辆轨迹通常需要了解车辆的动力学和非完整约束。然而，先前的研究将全局规划问题视为路径规划问题，而没有有效地考虑拓扑或动态约束。

为了解决这一差距，本文提出了一种三阶段轨迹规划算法，该算法由 A*、快速探索随机树 （RRT） 和局部轨迹优化 （LTR） 阶段组成，以在不平坦地形上纳入动力学和非完整约束。
该算法在具有随机地形场和障碍物的场景中进行了测试，以证明所有三个阶段的必要性。与最先进的方法相比，该算法具有更低的成本、更高的成功率和更高的计算效率。
然后，通过在 3-D 地形上控制模拟的 MRZR 车辆以及本地控制器来测试该算法，并与最先进的算法进行比较。结果表明，新算法能够以较低的成本规划动态可行的轨迹，而最先进的算法由于忽略动态车辆限制而无法执行。



原论文中连续时间形式的OCP（式1）的求解方法是，利用[NLOptControl](30)将其转录（离散化）为非线性规划（NLP）问题 ，并调用[Ipopt](31)求解器进行数值优化。具体实现中，采用10个配点 （Collocation Points）和后向欧拉积分法 （Backward Euler Scheme）完成连续到离散的系统转换。

关键术语与技术细节解析：
1.转录（Transcription）
将连续时间的微分方程约束（如车辆动力学方程）转化为代数方程，使OCP能被数值求解器处理。常见方法包括直接配点法（Direct Collocation）和单/多步积分法（如欧拉法、龙格-库塔法）。
2.配置点（Collocation Points）
在时间域内离散选择的点（此处10个），用于近似状态与控制变量的变化。更多配点可提升精度，但增加计算量。
后向欧拉法 的隐式特性（使用下一时刻状态计算当前导数值）增强了数值稳定性，适用于刚性问题。
3.NLOptControl与Ipopt
NLOptControl ：基于Julia的库，支持将最优控制问题自动转录为NLP标准形式。
Ipopt （Interior Point OPTimizer）：开源非线性规划求解器，擅长处理大规模带约束优化问题，通过内点法寻找满足KKT条件的最优解。
